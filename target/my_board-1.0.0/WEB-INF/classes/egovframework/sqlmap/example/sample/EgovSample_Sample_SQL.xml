<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Sample">

   <typeAlias  alias="egovMap" type="org.egovframe.rte.psl.dataaccess.util.EgovMap"/>
   <typeAlias  alias="searchVO" type="egovframework.example.sample.service.HGH_SampleDefaultVO"/>

   <resultMap id="sample" class="egovframework.example.sample.service.HGH_SampleVO">
      <result property="id" column="HGH_id"/>
      <result property="name" column="HGH_name"/>
      <result property="description" column="HGH_description"/>
      <result property="useYn" column="HGH_use_yn"/>
      <result property="regUser" column="HGH_reg_user"/>
   </resultMap>

   <insert id="sampleDAO.insertSample">
      <![CDATA[
         INSERT INTO HGH_BOARD
            ( HGH_ID
              , HGH_NAME
              , HGH_DESCRIPTION
              , HGH_USE_YN
              , HGH_REG_USER )
         VALUES ( #id#
              , #name#
              , #description#
              , #useYn#
              , #regUser# )
      ]]>
   </insert>
   
   <update id="sampleDAO.updateSample">
      <![CDATA[
         UPDATE HGH_BOARD
         SET HGH_ID=#id#
            , HGH_NAME=#name#
            , HGH_DESCRIPTION=#description#
            , HGH_USE_YN=#useYn#
         WHERE HGH_ID=#id#
      ]]>
   </update>
   
   <delete id="sampleDAO.deleteSample">
      <![CDATA[
         DELETE FROM HGH_BOARD 
         WHERE HGH_ID=#id#
      ]]>
   </delete>
    
    <select id="sampleDAO.selectSample" resultMap="sample">
        <![CDATA[
            SELECT
                HGH_ID, HGH_NAME, HGH_DESCRIPTION, HGH_USE_YN, HGH_REG_USER
            FROM HGH_BOARD
            WHERE HGH_ID=#id#
        ]]>
    </select>
   
   <select id="sampleDAO.selectSampleList" parameterClass="HGH_searchVO" resultClass="egovMap">

         SELECT
            HGH_ID, HGH_NAME, HGH_DESCRIPTION, HGH_USE_YN, HGH_REG_USER
         FROM HGH_BOARD
         WHERE 1=1
         <isEqual prepend="AND" property="searchCondition" compareValue="0">
            HGH_ID LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         <isEqual prepend="AND" property="searchCondition" compareValue="1">
            HGH_NAME LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         ORDER BY HGH_ID DESC
         OFFSET #firstIndex# ROWS
         FETCH NEXT #recordCountPerPage# ROWS ONLY   
   </select>
   
   <select id="sampleDAO.selectSampleListTotCnt" parameterClass="HGH_searchVO" resultClass="int">

         SELECT COUNT(*) totcnt
         FROM HGH_BOARD
         WHERE 1=1
         <isEqual prepend="AND" property="searchCondition" compareValue="0">
            HGH_ID LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         <isEqual prepend="AND" property="searchCondition" compareValue="1">
            HGH_NAME LIKE '%' || #searchKeyword# || '%'
         </isEqual>
   </select>

</sqlMap>