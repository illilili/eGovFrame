<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Sample">

   <typeAlias  alias="egovMap" type="org.egovframe.rte.psl.dataaccess.util.EgovMap"/>
   <typeAlias  alias="searchVO" type="egovframework.example.sample.service.SampleDefaultVO"/>

   <resultMap id="sample" class="egovframework.example.sample.service.SampleVO">
      <result property="id" column="KJG_ID"/>
      <result property="name" column="KJG_NAME"/>
      <result property="description" column="KJG_DESCRIPTION"/>
      <result property="useYn" column="KJG_USE_YN"/>
      <result property="regUser" column="KJG_USER"/>
   </resultMap>

   <insert id="sampleDAO.insertSample">
      <![CDATA[
         INSERT INTO KJG_BOARD
            ( KJG_ID
              , KJG_NAME
              , KJG_DESCRIPTION
              , KJG_USE_YN
              , KJG_USER )
         VALUES ( #id#
              , #name#
              , #description#
              , #useYn#
              , #regUser# )
      ]]>
   </insert>
   
   <update id="sampleDAO.updateSample">
      <![CDATA[
         UPDATE KJG_BOARD
         SET KJG_ID=#id#
            , KJG_NAME=#name#
            , KJG_DESCRIPTION=#description#
            , KJG_USE_YN=#useYn#
         WHERE KJG_ID=#id#
      ]]>
   </update>
   
   <delete id="sampleDAO.deleteSample">
      <![CDATA[
         DELETE FROM KJG_BOARD 
         WHERE KJG_ID=#id#
      ]]>
   </delete>
    
    <select id="sampleDAO.selectSample" resultMap="sample">
        <![CDATA[
            SELECT
                KJG_ID, KJG_NAME, KJG_DESCRIPTION, KJG_USE_YN, KJG_USER
            FROM KJG_BOARD
            WHERE KJG_ID=#id#
        ]]>
    </select>
   
   <select id="sampleDAO.selectSampleList" parameterClass="searchVO" resultClass="egovMap">

         SELECT
            KJG_ID, KJG_NAME, KJG_DESCRIPTION, KJG_USE_YN, KJG_USER
         FROM KJG_BOARD
         WHERE 1=1
         <isEqual prepend="AND" property="searchCondition" compareValue="0">
            KJG_ID LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         <isEqual prepend="AND" property="searchCondition" compareValue="1">
            KJG_NAME LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         ORDER BY KJG_ID DESC
         OFFSET #firstIndex# ROWS
         FETCH NEXT #recordCountPerPage# ROWS ONLY   
   </select>
   
   <select id="sampleDAO.selectSampleListTotCnt" parameterClass="searchVO" resultClass="int">

         SELECT COUNT(*) totcnt
         FROM KJG_BOARD
         WHERE 1=1
         <isEqual prepend="AND" property="searchCondition" compareValue="0">
            KJG_ID LIKE '%' || #searchKeyword# || '%'
         </isEqual>
         <isEqual prepend="AND" property="searchCondition" compareValue="1">
            KJG_NAME LIKE '%' || #searchKeyword# || '%'
         </isEqual>
   </select>

</sqlMap>